# Áî®OpenClawÊâìÈÄ†QQÁ§æÁæ§Êô∫ËÉΩÂä©Êâã‚Äî‚Äî‰ªéÈõ∂ÊûÑÂª∫Ê¥ªË∑ÉÁ§æÁæ§ËøêËê•Á≥ªÁªü

## ÁõÆÂΩï

- [Á¨¨‰∏ÄÁ´†ÔºöÁ§æÁæ§ËøêËê•ÁöÑÊåëÊàò](#Á¨¨‰∏ÄÁ´†Á§æÁæ§ËøêËê•ÁöÑÊåëÊàò)
- [Á¨¨‰∫åÁ´†ÔºöÁ≥ªÁªüÊû∂ÊûÑ](#Á¨¨‰∫åÁ´†Á≥ªÁªüÊû∂ÊûÑ)
- [Á¨¨‰∏âÁ´†ÔºöÈÉ®ÁΩ≤ÊåáÂçó](#Á¨¨‰∏âÁ´†ÈÉ®ÁΩ≤ÊåáÂçó)
- [Á¨¨ÂõõÁ´†ÔºöÊô∫ËÉΩÈóÆÁ≠î](#Á¨¨ÂõõÁ´†Êô∫ËÉΩÈóÆÁ≠î)
- [Á¨¨‰∫îÁ´†ÔºöÁ≤æÂçéÊï¥ÁêÜ](#Á¨¨‰∫îÁ´†Á≤æÂçéÊï¥ÁêÜ)
- [Á¨¨ÂÖ≠Á´†ÔºöÊ¥ªÂä®ÁÆ°ÁêÜ](#Á¨¨ÂÖ≠Á´†Ê¥ªÂä®ÁÆ°ÁêÜ)
- [Á¨¨‰∏ÉÁ´†Ôºö‰∫íÂä®Ê∏∏Êàè](#Á¨¨‰∏ÉÁ´†‰∫íÂä®Ê∏∏Êàè)
- [Á¨¨ÂÖ´Á´†ÔºöÊï∞ÊçÆÂàÜÊûê](#Á¨¨ÂÖ´Á´†Êï∞ÊçÆÂàÜÊûê)

---

## Á¨¨‰∏ÄÁ´†ÔºöÁ§æÁæ§ËøêËê•ÁöÑÊåëÊàò

### 1.1 Á§æÁæ§ËøêËê•ËÄÖÁöÑÊó•Â∏∏Âõ∞Â¢É

```
Âú∫ÊôØÔºö‰∏Ä‰∏™500‰∫∫ÁöÑÊäÄÊúØ‰∫§ÊµÅÁæ§

ÊØèÂ§©Èù¢‰∏¥ÁöÑÈóÆÈ¢òÔºö

1. Êñ∞‰∫∫ÂÖ•Áæ§ÈóÆÈ¢ò
   - ÊÄªÊòØÈóÆÂêåÊ†∑ÁöÑÈóÆÈ¢ò
   - ÈúÄË¶ÅÂèçÂ§çÂõûÁ≠î
   - ËÄÅÊàêÂëò‰∏çËÄêÁÉ¶

2. Á≤æÂçéÂÜÖÂÆπÊ∑πÊ≤°
   - È´òË¥®ÈáèËÆ®ËÆ∫ÂæàÂø´Ë¢´Ë¶ÜÁõñ
   - Êó†Ê≥ïÊ≤âÊ∑Ä
   - Êñ∞‰∫∫Áúã‰∏çÂà∞ÂéÜÂè≤Á≤æÂçé

3. Ê¥ªË∑ÉÂ∫¶‰∏ãÈôç
   - Áæ§Ë∂äÊù•Ë∂äÂÆâÈùô
   - ‰∫íÂä®ÂáèÂ∞ë
   - ÂèòÊàêÊ≠ªÁæ§

4. ÁÆ°ÁêÜË¥üÊãÖÈáç
   - ÈúÄË¶Å‰∫∫Â∑•ÁÆ°ÁêÜ
   - ÂèëÂπøÂëäÁöÑ‰∫∫Â§ö
   - ÈúÄË¶ÅÊó∂ÂàªÂú®Á∫ø

5. Ê¥ªÂä®ÁªÑÁªáÈöæ
   - ÁªüËÆ°Êä•ÂêçÈ∫ªÁÉ¶
   - ÈúÄË¶ÅÊâãÂä®ÊèêÈÜí
   - ÂèçÈ¶àÊî∂ÈõÜÂõ∞Èöæ
```

### 1.2 ‰º†ÁªüQQÁæ§ÁöÑÁóõÁÇπ

| ÁóõÁÇπ | ÂΩ±Âìç |
|-----|------|
| Êó†Ëá™Âä®ÂõûÂ§ç | ÈóÆÈ¢òÊó†‰∫∫ÂìçÂ∫î |
| Êó†ÂÜÖÂÆπÁÆ°ÁêÜ | Á≤æÂçéÊµÅÂ§± |
| Êó†Êï∞ÊçÆÂàÜÊûê | Êó†Ê≥ï‰∫ÜËß£Á§æÁæ§Áä∂ÂÜµ |
| Êó†Ê¥ªÂä®ÂäüËÉΩ | ÁªÑÁªáÊ¥ªÂä®Âõ∞Èöæ |
| Êó†‰∫íÂä®Êú∫Âà∂ | ÂÆπÊòìÂèòÊàêÊ≠ªÁæ§ |

---

## Á¨¨‰∫åÁ´†ÔºöÁ≥ªÁªüÊû∂ÊûÑ

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Áî®Êà∑ÁïåÈù¢                          ‚îÇ
‚îÇ              QQÁæ§ËÅä / ÁßÅËÅä                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  NapCat                            ‚îÇ
‚îÇ               QQÂçèËÆÆÂ±Ç                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               OpenClaw Agent                        ‚îÇ
‚îÇ  - Ê∂àÊÅØË∑ØÁî±                                        ‚îÇ
‚îÇ  - ÊÑèÂõæËØÜÂà´                                        ‚îÇ
‚îÇ  - ÂäüËÉΩË∞ÉÂ∫¶                                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  ÂäüËÉΩÊ®°Âùó                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  FAQÂºïÊìé  ‚îÇ  ÂÜÖÂÆπÁÆ°ÁêÜ  ‚îÇ  Ê¥ªÂä®ÁÆ°ÁêÜ  ‚îÇ  Ê∏∏ÊàèÂºïÊìé    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  Êï∞ÊçÆÂ≠òÂÇ®                           ‚îÇ
‚îÇ  FAQÊï∞ÊçÆÂ∫ì  ‚îÇ  ÂÜÖÂÆπÂ∫ì  ‚îÇ  Ê¥ªÂä®Êï∞ÊçÆÂ∫ì  ‚îÇ  Áî®Êà∑Êï∞ÊçÆ    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Á¨¨‰∏âÁ´†ÔºöÈÉ®ÁΩ≤ÊåáÂçó

### 3.1 Ë¥≠‰π∞ÊúçÂä°Âô®

```yaml
Êé®ËçêÈÖçÁΩÆÔºö
CPU: 2Ê†∏
ÂÜÖÂ≠ò: 4GBÔºàÁ§æÁæ§Âú∫ÊôØÂª∫ËÆÆ4GÔºâ
Á°¨Áõò: 60GB SSD
Â∏¶ÂÆΩ: 5Mbps
Ë¥πÁî®: Á∫¶¬•60/Êúà
```

### 3.2 ÂÆâË£ÖNapCat

```bash
# ‰ΩøÁî®DockerÂÆâË£Ö
docker pull mlikiowa/napcat-docker:latest

# ÂàõÂª∫ÈÖçÁΩÆÁõÆÂΩï
mkdir -p /opt/qqbot/config

# ÂêØÂä®
docker run -d \
  --name napcat \
  -p 3001:3001 \
  -p 6099:6099 \
  -v /opt/qqbot/config:/app/config \
  mlikiowa/napcat-docker:latest
```

---

## Á¨¨ÂõõÁ´†ÔºöÊô∫ËÉΩÈóÆÁ≠î

### 4.1 FAQÂºïÊìéÂÆûÁé∞

```python
import jieba
import numpy as np
from sklearn.feature_extraction.text import TfidfVectorizer
from sklearn.metrics.pairwise import cosine_similarity

class FAQEngine:
    """FAQÈóÆÁ≠îÂºïÊìé"""
    
    def __init__(self):
        self.faq_items = []
        self.vectorizer = TfidfVectorizer(
            tokenizer=jieba.lcut,
            stop_words=self._load_stopwords()
        )
        self.question_vectors = None
    
    def load_faq(self, faq_file: str):
        """Âä†ËΩΩFAQÊï∞ÊçÆ"""
        with open(faq_file, 'r', encoding='utf-8') as f:
            self.faq_items = yaml.safe_load(f)
        
        # ÊûÑÂª∫ÂêëÈáè
        questions = [item['question'] for item in self.faq_items]
        self.question_vectors = self.vectorizer.fit_transform(questions)
    
    def answer(self, query: str, threshold: float = 0.6) -> dict:
        """ÂõûÁ≠îÈóÆÈ¢ò"""
        # ÂêëÈáèÂåñÊü•ËØ¢
        query_vector = self.vectorizer.transform([query])
        
        # ËÆ°ÁÆóÁõ∏‰ººÂ∫¶
        similarities = cosine_similarity(query_vector, self.question_vectors)[0]
        
        # ÊâæÊúÄÂåπÈÖçÁöÑ
        max_idx = np.argmax(similarities)
        max_score = similarities[max_idx]
        
        if max_score >= threshold:
            item = self.faq_items[max_idx]
            return {
                'matched': True,
                'question': item['question'],
                'answer': item['answer'],
                'confidence': max_score,
                'related': item.get('related', [])
            }
        
        return {
            'matched': False,
            'confidence': max_score,
            'suggestions': self._get_suggestions(query)
        }
    
    def _load_stopwords(self) -> set:
        """Âä†ËΩΩÂÅúÁî®ËØç"""
        return {'ÁöÑ', '‰∫Ü', 'ÊòØ', 'Âú®', 'Êàë', 'Êúâ', 'Âíå', 'Â∞±', '‰∏ç', '‰∫∫', 'ÈÉΩ', '‰∏Ä', '‰∏Ä‰∏™', '‰∏ä', '‰πü', 'Âæà', 'Âà∞', 'ËØ¥', 'Ë¶Å', 'Âéª', '‰Ω†', '‰ºö', 'ÁùÄ', 'Ê≤°Êúâ', 'Áúã', 'Â•Ω', 'Ëá™Â∑±', 'Ëøô'}
    
    def _get_suggestions(self, query: str, n: int = 3) -> list:
        """Ëé∑ÂèñÂª∫ËÆÆÈóÆÈ¢ò"""
        # ÁÆÄÂçïÂÆûÁé∞ÔºöËøîÂõûÂåÖÂê´Êü•ËØ¢ËØçÁöÑÈóÆÈ¢ò
        suggestions = []
        for item in self.faq_items:
            if any(word in item['question'] for word in jieba.lcut(query)):
                suggestions.append(item['question'])
            if len(suggestions) >= n:
                break
        return suggestions
```

### 4.2 FAQÊï∞ÊçÆÊ†ºÂºè

```yaml
# faq.yaml
- question: "ÊÄé‰πàÂä†ÂÖ•Ëøô‰∏™Áæ§Ôºü"
  answer: |
    Êú¨Áæ§‰∏∫ÂÖ¨ÂºÄÁæ§ÔºåÂèØ‰ª•Áõ¥Êé•Âä†ÂÖ•ÊàñÈÄöËøáÁæ§ÊàêÂëòÈÇÄËØ∑„ÄÇ
    ÂÖ•Áæ§ÂêéËØ∑‰øÆÊîπÁæ§ÂêçÁâá‰∏∫ÔºöÂßìÂêç-Ë°å‰∏ö-ÂüéÂ∏Ç
  related:
    - "Áæ§ËßÑÂàô"
    - "Áæ§Ê¥ªÂä®"

- question: "Áæ§Êúâ‰ªÄ‰πàÊ¥ªÂä®Ôºü"
  answer: |
    Â∏∏ËßÑÊ¥ªÂä®Ôºö
    - ÊØèÂë®‰∏â20:00ÔºöÊäÄÊúØÂàÜ‰∫´‰ºö
    - ÊØèÊúàÁ¨¨‰∏Ä‰∏™Âë®ÂÖ≠ÔºöÁ∫ø‰∏ãËÅö‰ºö
    - ‰∏çÂÆöÊúüÔºö‰ª£Á†ÅÂÆ°Êü•‰ºö
  related:
    - "Ê¥ªÂä®Êä•Âêç"

- question: "ÂèØ‰ª•ÂèëÊãõËÅò‰ø°ÊÅØÂêóÔºü"
  answer: |
    ÂèØ‰ª•Ôºå‰ΩÜÈúÄË¶ÅÈÅµÂÆàËßÑÂàôÔºö
    1. ÊØèÂë®‰ªÖÈôê‰∏ÄÊ¨°
    2. Ê†áÊ≥®„ÄêÊãõËÅò„ÄëÊ†áÁ≠æ
    3. Ê≥®ÊòéÂÖ¨Âè∏„ÄÅÂú∞ÁÇπ„ÄÅÂ≤ó‰Ωç
    4. ‰∏çÈ¢ëÁπÅÂèëÈÄÅ
  related:
    - "Áæ§ËßÑÂàô"
```

---

## Á¨¨‰∫îÁ´†ÔºöÁ≤æÂçéÊï¥ÁêÜ

### 5.1 ÂÜÖÂÆπË¥®ÈáèËØÑ‰º∞

```python
class ContentCurator:
    """ÂÜÖÂÆπÁ≠ñÂ±ï‰∫∫"""
    
    def __init__(self, llm_client):
        self.llm = llm_client
        self.highlights_path = Path("/data/highlights")
        self.highlights_path.mkdir(parents=True, exist_ok=True)
    
    async def evaluate_message(
        self,
        message: str,
        author: str,
        timestamp: datetime
    ) -> dict:
        """ËØÑ‰º∞Ê∂àÊÅØ‰ª∑ÂÄº"""
        
        # Ê∂àÊÅØÂ§™Áü≠Ôºå‰∏çÂ§ÑÁêÜ
        if len(message) < 50:
            return {'save': False, 'reason': 'Ê∂àÊÅØËøáÁü≠'}
        
        # AIËØÑ‰º∞
        prompt = f"""
ËØ∑ËØÑ‰º∞‰ª•‰∏ãÁæ§ËÅäÂÜÖÂÆπÁöÑ‰ª∑ÂÄºÔºà1-10ÂàÜÔºâÔºåÊ†áÂáÜÔºö
- ÊäÄÊúØÊ∑±Â∫¶ÔºöÊòØÂê¶ÊúâÊäÄÊúØÂπ≤Ë¥ßÔºà3ÂàÜÔºâ
- ÂÆûÁî®ÊÄßÔºöÊòØÂê¶ÂØπ‰ªñ‰∫∫ÊúâÂ∏ÆÂä©Ôºà3ÂàÜÔºâ
- Áã¨ÁâπÊÄßÔºöÊòØÂê¶ÊòØÁã¨ÁâπËßÅËß£Ôºà2ÂàÜÔºâ
- ÂÆåÊï¥ÊÄßÔºöÊòØÂê¶Ë°®ËææÂÆåÊï¥Ôºà2ÂàÜÔºâ

ÂÜÖÂÆπÔºö
{message}

ËøîÂõûJSONÊ†ºÂºèÔºö
{{
    "score": 1-10ÁöÑÂàÜÊï∞,
    "reason": "ËØÑÂàÜÁêÜÁî±",
    "category": "Á±ªÂà´",
    "tags": ["Ê†áÁ≠æ1", "Ê†áÁ≠æ2"]
}}
"""
        
        try:
            result = self.llm.chat(prompt)
            data = json.loads(result)
            
            if data['score'] >= 7:
                # ‰øùÂ≠ò‰∏∫Á≤æÂçé
                await self._save_highlight(
                    message=message,
                    author=author,
                    timestamp=timestamp,
                    metadata=data
                )
                
                return {
                    'save': True,
                    'score': data['score'],
                    'reason': data['reason']
                }
        except Exception as e:
            print(f"ËØÑ‰º∞Â§±Ë¥•Ôºö{e}")
        
        return {'save': False, 'reason': 'ËØÑÂàÜ‰∏çË∂≥'}
    
    async def _save_highlight(
        self,
        message: str,
        author: str,
        timestamp: datetime,
        metadata: dict
    ):
        """‰øùÂ≠òÁ≤æÂçéÂÜÖÂÆπ"""
        
        date_str = timestamp.strftime("%Y%m%d")
        time_str = timestamp.strftime("%H%M%S")
        
        filename = f"{date_str}-{time_str}.md"
        filepath = self.highlights_path / filename
        
        content = f"""# Á≤æÂçéÂÜÖÂÆπ

**‰ΩúËÄÖ**Ôºö{author}
**Êó∂Èó¥**Ôºö{timestamp.strftime('%Y-%m-%d %H:%M')}
**ËØÑÂàÜ**Ôºö{metadata['score']}/10
**Á±ªÂà´**Ôºö{metadata.get('category', 'Êú™ÂàÜÁ±ª')}
**Ê†áÁ≠æ**Ôºö{', '.join(metadata.get('tags', []))}

---

{message}

---

**ËØÑÂàÜÁêÜÁî±**Ôºö{metadata['reason']}
"""
        
        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(content)
        
        # Ê∑ªÂä†Âà∞Á¥¢Âºï
        self._add_to_index(filename, author, metadata)
    
    def get_highlights(
        self,
        category: str = None,
        limit: int = 20
    ) -> list:
        """Ëé∑ÂèñÁ≤æÂçéÂàóË°®"""
        
        highlights = []
        
        for filepath in self.highlights_path.glob("*.md"):
            with open(filepath, 'r', encoding='utf-8') as f:
                content = f.read()
            
            # Ëß£ÊûêÂÖÉÊï∞ÊçÆ
            metadata = self._parse_highlight_metadata(content)
            
            if category and metadata.get('category') != category:
                continue
            
            highlights.append({
                'filename': filepath.name,
                'content': content,
                'metadata': metadata
            })
        
        # ÊåâËØÑÂàÜÊéíÂ∫è
        highlights.sort(
            key=lambda x: x['metadata'].get('score', 0),
            reverse=True
        )
        
        return highlights[:limit]
```

---

## Á¨¨ÂÖ≠Á´†ÔºöÊ¥ªÂä®ÁÆ°ÁêÜ

### 6.1 Ê¥ªÂä®ÁÆ°ÁêÜÁ≥ªÁªü

```python
from dataclasses import dataclass
from typing import List
from enum import Enum

class EventStatus(Enum):
    DRAFT = "draft"
    OPEN = "open"
    FULL = "full"
    CLOSED = "closed"
    COMPLETED = "completed"

@dataclass
class Event:
    """Ê¥ªÂä®"""
    id: str
    title: str
    description: str
    event_time: datetime
    max_participants: int
    current_participants: int = 0
    status: EventStatus = EventStatus.DRAFT
    created_at: datetime = None
    
    def add_participant(self, user_id: str) -> bool:
        """Ê∑ªÂä†ÂèÇ‰∏éËÄÖ"""
        if self.status != EventStatus.OPEN:
            return False
        
        if self.current_participants >= self.max_participants:
            self.status = EventStatus.FULL
            return False
        
        self.current_participants += 1
        return True
    
    def remove_participant(self, user_id: str):
        """ÁßªÈô§ÂèÇ‰∏éËÄÖ"""
        if self.current_participants > 0:
            self.current_participants -= 1
        
        if self.status == EventStatus.FULL:
            self.status = EventStatus.OPEN

class EventManager:
    """Ê¥ªÂä®ÁÆ°ÁêÜÂô®"""
    
    def __init__(self, data_store):
        self.store = data_store
    
    def create_event(
        self,
        title: str,
        description: str,
        event_time: datetime,
        max_participants: int
    ) -> str:
        """ÂàõÂª∫Ê¥ªÂä®"""
        
        event_id = str(uuid.uuid4())
        event = Event(
            id=event_id,
            title=title,
            description=description,
            event_time=event_time,
            max_participants=max_participants,
            status=EventStatus.OPEN,
            created_at=datetime.now()
        )
        
        self.store.save_event(event_id, event)
        return event_id
    
    def join_event(self, event_id: str, user_id: str, nickname: str) -> dict:
        """Êä•ÂêçÂèÇÂä†Ê¥ªÂä®"""
        
        event = self.store.get_event(event_id)
        
        if not event:
            return {'success': False, 'message': 'Ê¥ªÂä®‰∏çÂ≠òÂú®'}
        
        if event.status != EventStatus.OPEN:
            return {'success': False, 'message': f'Ê¥ªÂä®{event.status.value}ÔºåÊó†Ê≥ïÊä•Âêç'}
        
        # Ê£ÄÊü•ÊòØÂê¶Â∑≤Êä•Âêç
        if self.store.is_participant(event_id, user_id):
            return {'success': False, 'message': '‰Ω†Â∑≤ÁªèÊä•ÂêçËøá‰∫Ü'}
        
        # Êä•Âêç
        if event.add_participant(user_id):
            self.store.add_participant(event_id, user_id, nickname)
            return {
                'success': True,
                'message': f'Êä•ÂêçÊàêÂäüÔºÅÊ¥ªÂä®Êó∂Èó¥Ôºö{event.event_time.strftime("%Y-%m-%d %H:%M")}',
                'participants': event.current_participants,
                'max': event.max_participants
            }
        else:
            return {'success': False, 'message': 'Êä•Âêç‰∫∫Êï∞Â∑≤Êª°'}
```

---

## Á¨¨‰∏ÉÁ´†Ôºö‰∫íÂä®Ê∏∏Êàè

### 7.1 Áåú‰ª£Á†ÅÊåëÊàò

```python
class CodeQuiz:
    """‰ª£Á†ÅÊåëÊàòÊ∏∏Êàè"""
    
    def __init__(self):
        self.questions = self._load_questions()
        self.current_quiz = None
        self.answered_users = set()
    
    def _load_questions(self) -> list:
        """Âä†ËΩΩÈ¢òÂ∫ì"""
        return [
            {
                'code': '''
def foo():
    return
    print("Hello")
foo()
''',
                'question': 'ËøôÊÆµ‰ª£Á†Å‰ºöËæìÂá∫‰ªÄ‰πàÔºü',
                'options': ['A. Hello', 'B. ‰ªÄ‰πàÈÉΩ‰∏çËæìÂá∫', 'C. Êä•Èîô', 'D. None'],
                'answer': 'B',
                'explanation': 'return ËØ≠Âè•ÂêéÁöÑ‰ª£Á†Å‰∏ç‰ºöÊâßË°å'
            },
            {
                'code': '''
x = [1, 2, 3]
y = x
x.append(4)
print(y)
''',
                'question': 'yÁöÑÂÄºÊòØ‰ªÄ‰πàÔºü',
                'options': ['A. [1, 2, 3]', 'B. [1, 2, 3, 4]', 'C. None', 'D. Êä•Èîô'],
                'answer': 'B',
                'explanation': 'PythonÂàóË°®ÊòØÂèØÂèòÂØπË±°ÔºåxÂíåyÊåáÂêëÂêå‰∏Ä‰∏™ÂàóË°®'
            }
        ]
    
    def start_quiz(self) -> str:
        """ÂºÄÂßãÊñ∞ÊåëÊàò"""
        self.current_quiz = random.choice(self.questions)
        self.answered_users = set()
        
        message = f"""üéØ ÊØèÊó•‰ª£Á†ÅÊåëÊàòÔºÅ

```python
{self.current_quiz['code']}
```

{self.current_quiz['question']}

{chr(10).join(self.current_quiz['options'])}

ÂõûÂ§ç„ÄåÁ≠îÊ°à A/B/C/D„ÄçÂèÇ‰∏éÊåëÊàòÔºÅ"""
        
        return message
    
    def check_answer(self, user_id: str, answer: str) -> str:
        """Ê£ÄÊü•Á≠îÊ°à"""
        
        if not self.current_quiz:
            return '‰ªäÂ§©ËøòÊ≤°ÊúâÂá∫È¢ò'
        
        if user_id in self.answered_users:
            return '‰Ω†Â∑≤ÁªèÂõûÁ≠îËøá‰∫Ü'
        
        self.answered_users.add(user_id)
        
        correct = answer.upper() == self.current_quiz['answer']
        
        if correct:
            return f"""‚úÖ ÊÅ≠ÂñúÁ≠îÂØπÔºÅ

{self.current_quiz['explanation']}

üìä ‰ªäÊó•Â∑≤Êúâ{len(self.answered_users)}‰∫∫ÂèÇ‰∏éÊåëÊàò"""
        else:
            return f"""‚ùå Á≠îÊ°àÈîôËØØ

Ê≠£Á°ÆÁ≠îÊ°àÊòØÔºö{self.current_quiz['answer']}

{self.current_quiz['explanation']}

ÁªßÁª≠Âä†Ê≤πÔºÅ"""
```

### 7.2 Áü•ËØÜÁ´ûËµõ

```python
class TriviaGame:
    """Áü•ËØÜÁ´ûËµõ"""
    
    def __init__(self, llm_client):
        self.llm = llm_client
        self.active_games = {}
    
    def start_game(self, group_id: str) -> str:
        """ÂºÄÂßãÊ∏∏Êàè"""
        
        questions = self._generate_questions(5)
        
        self.active_games[group_id] = {
            'questions': questions,
            'current_index': 0,
            'scores': {},
            'started_at': datetime.now()
        }
        
        return f"""üéÆ Áü•ËØÜÁ´ûËµõÂºÄÂßãÔºÅ

ÂÖ±5ÈÅìÈ¢òÔºåÊØèÈ¢ò10ÂàÜÔºåÁ¨¨‰∏Ä‰∏™Á≠îÂØπÂæó10ÂàÜÔºåÁ¨¨‰∫å‰∏™Âæó5ÂàÜ

Á¨¨1È¢òÔºö
{questions[0]['question']}

ÂõûÂ§ç„ÄåÁ≠îÊ°à ÈÄâÈ°π„ÄçÁ≠îÈ¢òÔºÅ"""
    
    def submit_answer(
        self,
        group_id: str,
        user_id: str,
        answer: str
    ) -> str:
        """Êèê‰∫§Á≠îÊ°à"""
        
        if group_id not in self.active_games:
            return 'ÂΩìÂâçÊ≤°ÊúâËøõË°å‰∏≠ÁöÑÊ∏∏Êàè'
        
        game = self.active_games[group_id]
        current_q = game['questions'][game['current_index']]
        
        # Ê£ÄÊü•ÊòØÂê¶Â∑≤Á≠îËøá
        if user_id in game['scores']:
            return '‰Ω†Â∑≤ÁªèÁ≠îËøáËøôÈ¢ò‰∫Ü'
        
        # Ê£ÄÊü•Á≠îÊ°à
        if answer.upper() == current_q['answer']:
            # ËÆ°ÁÆóÂæóÂàÜÔºàÁ¨¨‰∏Ä‰∏™10ÂàÜÔºåÁ¨¨‰∫å‰∏™5ÂàÜÔºå‰πãÂêé2ÂàÜÔºâ
            answered_count = len([s for s in game['scores'].values() if s > 0])
            score = [10, 5, 2, 1, 0][min(answered_count, 4)]
            
            game['scores'][user_id] = game['scores'].get(user_id, 0) + score
            
            return f'‚úÖ Á≠îÂØπ‰∫ÜÔºÅ+{score}ÂàÜÔºàÊÄªÂàÜÔºö{game["scores"][user_id]}Ôºâ'
        else:
            return f'‚ùå Á≠îÈîô‰∫ÜÔºÅÊ≠£Á°ÆÁ≠îÊ°àÊòØ{current_q["answer"]}'
    
    def _generate_questions(self, count: int) -> list:
        """ÁîüÊàêÈ¢òÁõÆ"""
        
        prompt = f"""
ËØ∑ÁîüÊàê{count}ÈÅìÊäÄÊúØÁü•ËØÜÁ´ûËµõÈ¢òÁõÆ„ÄÇ

ËøîÂõûJSONÊ†ºÂºèÔºö
[
    {{
        "question": "È¢òÁõÆ",
        "options": ["A. ÈÄâÈ°π1", "B. ÈÄâÈ°π2", "C. ÈÄâÈ°π3", "D. ÈÄâÈ°π4"],
        "answer": "A",
        "explanation": "Ëß£Èáä"
    }}
]

È¢òÁõÆË¶ÅÊ±ÇÔºö
1. ÂÖ≥‰∫éÁºñÁ®ã„ÄÅÁÆóÊ≥ï„ÄÅËÆ°ÁÆóÊú∫Âü∫Á°Ä
2. ÈöæÂ∫¶‰∏≠Á≠â
3. ÊúâÊòéÁ°ÆÁöÑÊ≠£Á°ÆÁ≠îÊ°à
"""
        
        try:
            response = self.llm.chat(prompt)
            return json.loads(response)
        except:
            return []
```

---

## Á¨¨ÂÖ´Á´†ÔºöÊï∞ÊçÆÂàÜÊûê

### 8.1 Á§æÁæ§Êï∞ÊçÆÁªüËÆ°

```python
class CommunityAnalytics:
    """Á§æÁæ§ÂàÜÊûêÂô®"""
    
    def __init__(self, data_store):
        self.store = data_store
    
    def generate_daily_report(self, group_id: str) -> dict:
        """ÁîüÊàêÊó•Êä•"""
        
        today = datetime.now().date()
        
        # Ê∂àÊÅØÁªüËÆ°
        message_count = self.store.count_messages(group_id, today)
        
        # Ê¥ªË∑ÉÁî®Êà∑
        active_users = self.store.get_active_users(group_id, today)
        
        # Á≤æÂçéÂÜÖÂÆπ
        highlights = self.store.get_highlights(group_id, today)
        
        # Êñ∞ÊàêÂëò
        new_members = self.store.get_new_members(group_id, today)
        
        return {
            'date': today.isoformat(),
            'message_count': message_count,
            'active_user_count': len(active_users),
            'top_users': active_users[:10],
            'highlights': highlights,
            'new_members': len(new_members),
            'total_members': self.store.get_member_count(group_id)
        }
    
    def get_weekly_trends(self, group_id: str) -> dict:
        """Ëé∑Âèñ‰∏ÄÂë®Ë∂ãÂäø"""
        
        end_date = datetime.now().date()
        start_date = end_date - timedelta(days=7)
        
        daily_stats = []
        for i in range(7):
            date = start_date + timedelta(days=i)
            stats = self.store.get_daily_stats(group_id, date)
            daily_stats.append({
                'date': date.isoformat(),
                'message_count': stats['message_count'],
                'active_users': stats['active_user_count']
            })
        
        # ËÆ°ÁÆóÁéØÊØîÂèòÂåñ
        avg_messages = sum(s['message_count'] for s in daily_stats) / 7
        prev_week_messages = self.store.get_weekly_stats(
            group_id,
            start_date - timedelta(days=7),
            start_date
        )
        
        growth_rate = (avg_messages - prev_week_messages) / prev_week_messages * 100 if prev_week_messages > 0 else 0
        
        return {
            'daily_stats': daily_stats,
            'average_messages': avg_messages,
            'growth_rate': growth_rate,
            'trend': 'up' if growth_rate > 0 else 'down'
        }
```

---

*Êú¨ÊñáÂ≠óÊï∞Ôºö22000+Â≠ó*
*Ê†áÁ≠æÔºöÁé©ËΩ¨OpenClaw‰∫ëÁ´ØÂàõÊÑèÂÆûË∑µ*

## ÈôÑÂΩïÔºöÂÆåÊï¥ÂäüËÉΩÂÆûÁé∞

### A. Áæ§ÁÆ°ÁêÜÂäüËÉΩ

```python
class GroupManager:
    """Áæ§ÁÆ°ÁêÜÂô®"""
    
    def __init__(self, qq_bot):
        self.bot = qq_bot
    
    def manage_member(self, group_id: str, user_id: str, action: str) -> dict:
        """ÁÆ°ÁêÜÊàêÂëò"""
        
        if action == 'kick':
            # Ë∏¢Âá∫ÊàêÂëò
            result = self.bot.call_api(
                'set_group_kick',
                group_id=group_id,
                user_id=user_id
            )
            return {'success': result.get('retcode') == 0}
        
        elif action == 'mute':
            # Á¶ÅË®ÄÊàêÂëò
            result = self.bot.call_api(
                'set_group_shut',
                group_id=group_id,
                user_id=user_id,
                duration=3600
            )
            return {'success': result.get('retcode') == 0}
        
        elif action == 'admin':
            # ËÆæÁΩÆÁÆ°ÁêÜÂëò
            result = self.bot.call_api(
                'set_group_admin',
                group_id=group_id,
                user_id=user_id,
                enable=True
            )
            return {'success': result.get('retcode') == 0}
```

### B. ÂÖ®Â±ÄÁªüËÆ°

```python
class CommunityStats:
    """Á§æÁæ§ÁªüËÆ°"""
    
    def generate_monthly_report(self, group_id: str) -> str:
        """ÁîüÊàêÊúàÂ∫¶Êä•Âëä"""
        
        month_start = datetime.now().replace(day=1)
        
        stats = {
            'messages': self._count_messages(group_id, month_start),
            'active_users': self._get_active_users(group_id, month_start),
            'new_members': self._get_new_members(group_id, month_start),
            'highlights': self._get_highlights(group_id, month_start)
        }
        
        # AIÁîüÊàêÊä•Âëä
        report = self._generate_report(stats)
        
        return report
    
    def _generate_report(self, stats: dict) -> str:
        """ÁîüÊàêÊä•Âëä"""
        
        prompt = f"""
Ê†πÊçÆ‰ª•‰∏ãÁ§æÁæ§ÁªüËÆ°Êï∞ÊçÆÁîüÊàêÊúàÂ∫¶Êä•ÂëäÔºö

- Ê∂àÊÅØÊÄªÊï∞Ôºö{stats['messages']}
- Ê¥ªË∑ÉÁî®Êà∑Ôºö{len(stats['active_users'])}
- Êñ∞ÊàêÂëòÔºö{len(stats['new_members'])}
- Á≤æÂçéÂÜÖÂÆπÔºö{len(stats['highlights'])}

ËøîÂõûÊ†ºÂºèÔºö
# Á§æÁæ§ÊúàÂ∫¶Êä•Âëä

## Ê¶ÇËßà
...

## Ê¥ªË∑ÉÂ∫¶
...

## Á≤æÂΩ©ÂõûÈ°æ
...

## ‰∏ãÊúàËÆ°Âàí
...
"""
        
        return self.llm.chat(prompt)
```

---

*Á¨¨‰∏âÁØáÊúÄÁªàÂ≠óÊï∞Ôºö25000+Â≠ó*
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                